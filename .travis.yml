language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: BHrFXIoHEHPuMQfPNJ7fsbrjjFDc23GyMvQEJOZVSKNtw9ZexcS3UhExprT3k+xlfNopmXr5CfxCHGxJiHS7BvSZrmp+/H2QVYW0x374Hu64bmRnzgezfUA9ArEo3L3jKADzedzoht+4XavqMLno5yY3wMG4t2YNEPf0RJjWtuqtzsskb8O019NfQ8/tdWchBra0W5G3SzJeX1SuMF6HTaqwygAr46f8o1V1LnlzQy0fgjs4N+MaWW/4dp3eYnr50S4yL7dRSaAHm//7AAzzFcL7s1HbURiaeGrgyd0doGgE0xVQUnYmVJk1PkJmrqDkRYHM1k9t0IZmFhAylMrE0moeDas4hvxSJPw/MNsyZB5ySDJCo2VINdA3zo9JmSDEBVe8cAH5Yw73YGMUItarR5F4fHOBbb9YgzC7CBZgkFj1zPHvH0OiCb6eZ/3wjEEcF3GMCfYYsf+oK75lRglN4+wDzZQiyAScLI6WE/a3mQKJgIQ6JMByyZbWjViewwjvRicJ9ul0sGUdZcH/42Cll7dI7XQ1+SoVspPxjcSxmfUBRc0eSo9LSJZETzudV/DhDhXGX0KKf2Ec1MIZmYZ2uYLJZknvgc7iqTip++VQFEq0cphmqLO37A1Go/CkFbn2jvPanMmStkZAfV4gJOkghmoa+lSJaUL8e4hM/pS8Sho=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
